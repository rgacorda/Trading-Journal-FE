(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[990],{7111:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>N});var s=r(95155),a=r(12115),n=r(33109),i=r(6874),l=r.n(i),o=r(59434),d=r(30285),c=r(62523),u=r(85057),m=r(56671),g=r(35695),f=r(9030),h=r(71155),v=r(71153),x=r(62177),p=r(90221),b=r(17759);let y=v.Ay.object({email:v.Ay.string().email(),password:v.Ay.string().min(8,{message:"Password must be at least 8 characters."})});function j(e){let{className:t,...r}=e,n=(0,x.mN)({resolver:(0,p.u)(y),defaultValues:{email:"",password:""}}),i=(0,g.useRouter)(),[v,j]=a.useState(!1),w=async e=>{try{let t=await (0,f.az)(e);h.k.getState().setUser(t.user),m.oR.success("Logged in successfully"),i.push("/dashboard/main")}catch(s){let e="Login Failed";if("object"==typeof s&&null!==s&&"isAxiosError"in s){var t,r;e=(null==(r=s.response)||null==(t=r.data)?void 0:t.message)||e}m.oR.error(e),console.error(s)}};return(0,s.jsx)(b.lV,{...n,children:(0,s.jsxs)("form",{onSubmit:n.handleSubmit(w),className:(0,o.cn)("flex flex-col gap-6",t),...r,children:[(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2 text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Login to your account"}),(0,s.jsx)("p",{className:"text-balance text-sm text-muted-foreground",children:"Enter your email below to login to your account"})]}),(0,s.jsxs)("div",{className:"grid gap-6",children:[(0,s.jsx)("div",{className:"grid gap-2",children:(0,s.jsx)(b.zB,{control:n.control,name:"email",render:e=>{let{field:t}=e;return(0,s.jsxs)(b.eI,{children:[(0,s.jsx)(b.lR,{children:"Email"}),(0,s.jsx)(b.MJ,{children:(0,s.jsx)(c.p,{placeholder:"Email",...t})}),(0,s.jsx)(b.C5,{})]})}})}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(u.J,{htmlFor:"password",children:"Password"}),(0,s.jsx)("a",{href:"#",className:"ml-auto text-sm underline-offset-4 hover:underline",children:"Forgot your password?"})]}),(0,s.jsx)(b.zB,{control:n.control,name:"password",render:e=>{let{field:t}=e;return(0,s.jsxs)(b.eI,{children:[(0,s.jsx)(b.MJ,{children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.p,{placeholder:"password",type:v?"text":"password",...t}),(0,s.jsx)("button",{type:"button",tabIndex:-1,className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-muted-foreground",onClick:()=>j(e=>!e),children:v?"Hide":"Show"})]})}),(0,s.jsx)(b.C5,{})]})}})]}),(0,s.jsx)(d.$,{type:"submit",className:"w-full",disabled:n.formState.isSubmitting,children:n.formState.isSubmitting?"Loading...":"Login"})]}),(0,s.jsxs)("div",{className:"text-center text-sm",children:["Don't have an account?"," ",(0,s.jsx)(l(),{href:"/register",className:"underline underline-offset-4",children:"Sign up"})]})]})})}function w(){let e=(0,g.useSearchParams)().get("expired");return(0,a.useEffect)(()=>{"1"===e&&m.oR.warning("Session expired. Please log in again.")},[e]),(0,s.jsxs)("div",{className:"grid min-h-svh lg:grid-cols-2",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4 p-6 md:p-10",children:[(0,s.jsx)("div",{className:"flex justify-center gap-2 md:justify-start",children:(0,s.jsxs)(l(),{href:"/",className:"flex items-center gap-2 font-medium text-xl font-medium text-gray-900",children:[(0,s.jsx)(n.A,{className:"h-8 w-8 text-gray-900"}),"Trade2Learn"]})}),(0,s.jsx)("div",{className:"flex flex-1 items-center justify-center",children:(0,s.jsx)("div",{className:"w-full max-w-xs",children:(0,s.jsx)(j,{})})})]}),(0,s.jsx)("div",{className:"relative hidden bg-muted lg:block",children:(0,s.jsx)("div",{className:"absolute inset-0 h-full w-full bg-gradient-to-t from-gray-200 via-gray-300 to-gray-200 dark:from-gray-700 dark:via-gray-600 dark:to-gray-700"})})]})}function N(){return(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)("div",{className:"h-5 w-5 border-b-2 border-gray-900 animate-spin"})}),children:(0,s.jsx)(w,{})})}},9030:(e,t,r)=>{"use strict";r.d(t,{UZ:()=>n,az:()=>i,fQ:()=>l});var s=r(55077);let a=(e,t)=>{if("object"==typeof e&&null!==e&&"isAxiosError"in e){var r,s,a;throw console.error(t,(null==(r=e.response)?void 0:r.data)||e.message),Error((null==(a=e.response)||null==(s=a.data)?void 0:s.message)||t)}throw console.error(t,e.message),Error(t)};async function n(e){try{return(await s.A.post("/auth/register",e)).data}catch(e){a(e,"Registration failed")}}async function i(e){try{let t=await s.A.post("/auth/login",e,{withCredentials:!0});return console.log(t.data),t.data}catch(e){a(e,"Login failed")}}async function l(){try{return(await s.A.post("/auth/logout",{},{withCredentials:!0})).data}catch(e){a(e,"Logout failed")}}},17759:(e,t,r)=>{"use strict";r.d(t,{C5:()=>x,MJ:()=>v,eI:()=>f,lR:()=>h,lV:()=>d,zB:()=>u});var s=r(95155),a=r(12115),n=r(99708),i=r(62177),l=r(59434),o=r(85057);let d=i.Op,c=a.createContext({}),u=e=>{let{...t}=e;return(0,s.jsx)(c.Provider,{value:{name:t.name},children:(0,s.jsx)(i.xI,{...t})})},m=()=>{let e=a.useContext(c),t=a.useContext(g),{getFieldState:r}=(0,i.xW)(),s=(0,i.lN)({name:e.name}),n=r(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...n}},g=a.createContext({});function f(e){let{className:t,...r}=e,n=a.useId();return(0,s.jsx)(g.Provider,{value:{id:n},children:(0,s.jsx)("div",{"data-slot":"form-item",className:(0,l.cn)("grid gap-2",t),...r})})}function h(e){let{className:t,...r}=e,{error:a,formItemId:n}=m();return(0,s.jsx)(o.J,{"data-slot":"form-label","data-error":!!a,className:(0,l.cn)("data-[error=true]:text-destructive",t),htmlFor:n,...r})}function v(e){let{...t}=e,{error:r,formItemId:a,formDescriptionId:i,formMessageId:l}=m();return(0,s.jsx)(n.DX,{"data-slot":"form-control",id:a,"aria-describedby":r?"".concat(i," ").concat(l):"".concat(i),"aria-invalid":!!r,...t})}function x(e){var t;let{className:r,...a}=e,{error:n,formMessageId:i}=m(),o=n?String(null!=(t=null==n?void 0:n.message)?t:""):a.children;return o?(0,s.jsx)("p",{"data-slot":"form-message",id:i,className:(0,l.cn)("text-destructive text-sm",r),...a,children:o}):null}},30285:(e,t,r)=>{"use strict";r.d(t,{$:()=>o,r:()=>l});var s=r(95155);r(12115);var a=r(99708),n=r(74466),i=r(59434);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:r,size:n,asChild:o=!1,...d}=e,c=o?a.DX:"button";return(0,s.jsx)(c,{"data-slot":"button",className:(0,i.cn)(l({variant:r,size:n,className:t})),...d})}},46786:(e,t,r)=>{"use strict";r.d(t,{Zr:()=>a});let s=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>s(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>s(t)(e)}}},a=(e,t)=>(r,a,n)=>{let i,l={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var t;let s=e=>null===e?null:JSON.parse(e,void 0),a=null!=(t=r.getItem(e))?t:null;return a instanceof Promise?a.then(s):s(a)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},o=!1,d=new Set,c=new Set,u=l.storage;if(!u)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),r(...e)},a,n);let m=()=>{let e=l.partialize({...a()});return u.setItem(l.name,{state:e,version:l.version})},g=n.setState;n.setState=(e,t)=>{g(e,t),m()};let f=e((...e)=>{r(...e),m()},a,n);n.getInitialState=()=>f;let h=()=>{var e,t;if(!u)return;o=!1,d.forEach(e=>{var t;return e(null!=(t=a())?t:f)});let n=(null==(t=l.onRehydrateStorage)?void 0:t.call(l,null!=(e=a())?e:f))||void 0;return s(u.getItem.bind(u))(l.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===l.version)return[!1,e.state];else{if(l.migrate){let t=l.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[s,n]=e;if(r(i=l.merge(n,null!=(t=a())?t:f),!0),s)return m()}).then(()=>{null==n||n(i,void 0),i=a(),o=!0,c.forEach(e=>e(i))}).catch(e=>{null==n||n(void 0,e)})};return n.persist={setOptions:e=>{l={...l,...e},e.storage&&(u=e.storage)},clearStorage:()=>{null==u||u.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>h(),hasHydrated:()=>o,onHydrate:e=>(d.add(e),()=>{d.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},l.skipHydration||h(),i||f}},55077:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(23464),a=r(35695);let n=s.A.create({baseURL:"https://api.trade2learn.site",withCredentials:!0});n.interceptors.response.use(e=>e,async e=>{var t;let r=e.config,s=(0,a.useRouter)();if((null==(t=e.response)?void 0:t.status)===401&&!r._retry&&!r.url.includes("/auth/refresh")){r._retry=!0;try{return await n.post("/auth/refresh"),n(r)}catch(e){console.error("Refresh token failed",e),s.replace("/login?expired=1")}}return Promise.reject(e)});let i=n},59434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(52596),a=r(39688);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},62523:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var s=r(95155);r(12115);var a=r(59434);function n(e){let{className:t,type:r,...n}=e;return(0,s.jsx)("input",{type:r,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}},65453:(e,t,r)=>{"use strict";r.d(t,{v:()=>o});var s=r(12115);let a=e=>{let t,r=new Set,s=(e,s)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=s?s:"object"!=typeof a||null===a)?a:Object.assign({},t,a),r.forEach(r=>r(t,e))}},a=()=>t,n={setState:s,getState:a,getInitialState:()=>i,subscribe:e=>(r.add(e),()=>r.delete(e))},i=t=e(s,a,n);return n},n=e=>e?a(e):a,i=e=>e,l=e=>{let t=n(e),r=e=>(function(e,t=i){let r=s.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return s.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},o=e=>e?l(e):l},71155:(e,t,r)=>{"use strict";r.d(t,{k:()=>n});var s=r(65453),a=r(46786);let n=(0,s.v)()((0,a.Zr)(e=>({user:null,setUser:t=>e({user:t}),clearUser:()=>e({user:null})}),{name:"user-store"}))},85057:(e,t,r)=>{"use strict";r.d(t,{J:()=>i});var s=r(95155);r(12115);var a=r(40968),n=r(59434);function i(e){let{className:t,...r}=e;return(0,s.jsx)(a.b,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...r})}},94442:(e,t,r)=>{Promise.resolve().then(r.bind(r,7111))}},e=>{var t=t=>e(e.s=t);e.O(0,[23,671,974,874,861,441,684,358],()=>t(94442)),_N_E=e.O()}]);